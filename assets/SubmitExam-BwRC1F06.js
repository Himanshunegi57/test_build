import{u as x,j as e,k as f,ag as N,ah as _,ai as c,aj as l,ak as g,al as d,am as b,an as m,ao as v,ap as w,R as r,B as o,aq as S,ar as E,as as k,l as C,at as O,a as T,D as A,G as y,L as Q}from"./index-cL-Drc9i.js";const D=s=>s.reduce((t,a)=>t+a.questions.length,0);function M(){const{examData:s}=x(),t=D(s.subjects);return e.jsx(f,{className:"w-full",children:e.jsx(N,{children:e.jsxs(_,{children:[e.jsxs(c,{children:[e.jsx(l,{className:"font-medium",children:"Total Questions"}),e.jsx(l,{children:t})]}),e.jsxs(c,{children:[e.jsx(l,{className:"font-medium",children:"Answered Questions"}),e.jsx(l,{children:e.jsx(g,{value:Object.values(s.studentExamState.student_answers).filter(a=>d(a)).length})})]}),e.jsxs(c,{children:[e.jsx(l,{className:"font-medium",children:"UnAnswered Questions"}),e.jsx(l,{children:e.jsx(b,{value:Object.values(s.studentExamState.student_answers).filter(a=>!d(a)&&!m(a)).length})})]}),e.jsxs(c,{children:[e.jsx(l,{className:"font-medium",children:"Not Visited Questions"}),e.jsx(l,{children:e.jsx(v,{value:t-Object.values(s.studentExamState.student_answers).length})})]}),e.jsxs(c,{children:[e.jsx(l,{className:"font-medium",children:"Marked for Review"}),e.jsx(l,{children:e.jsx(w,{value:Object.values(s.studentExamState.student_answers).filter(a=>m(a)).length})})]})]})})})}function R(){const{examData:s}=x(),[t,a]=r.useState(),[n,i]=r.useState(0),[j,p]=r.useState(0);return r.useEffect(()=>{t&&(p(t.scrollSnapList().length),i(t.selectedScrollSnap()+1),t.on("select",()=>{i(t.selectedScrollSnap()+1)}))},[t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex max-w-full overflow-x-auto gap-2 p-1 bg-gray-200",children:s.subjects.map((u,h)=>e.jsx(o,{size:"sm",variant:h===(t==null?void 0:t.selectedScrollSnap())?"default":"outline",onClick:()=>t==null?void 0:t.scrollTo(h),children:u.name},`button_${u.sub_id}`))}),e.jsx(S,{setApi:a,children:e.jsx(E,{children:s.subjects.map(u=>e.jsx(k,{children:e.jsx(q,{subject:u})}))})})]})}function q({subject:s,hideTitle:t=!1}){const{examData:a}=x();return e.jsx(f,{className:"w-full",children:e.jsxs(C,{className:"px-3 py-2",children:[t?"":e.jsx("h3",{className:"text-md font-medium mb-2 border-b",children:s.name}),e.jsxs("div",{className:"grid grid-cols-2 font-medium text-xs gap-2 justify-between tracking-tight",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-7 h-7 flex items-center justify-center bg-gray-100",children:s.questions.length}),"Total Questions"]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(g,{value:Object.values(a.studentExamState.student_answers).filter(n=>n.sub_id==s.sub_id&&d(n)).length}),"Answered"]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(b,{value:s.questions.length-Object.values(a.studentExamState.student_answers).filter(n=>n.sub_id==s.sub_id&&d(n)).length}),"UnAnswered"]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(w,{value:Object.values(a.studentExamState.student_answers).filter(n=>n.sub_id==s.sub_id&&m(n)).length}),"Marked"]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(O,{value:Object.values(a.studentExamState.student_answers).filter(n=>n.sub_id==s.sub_id&&m(n)&&d(n)).length}),"Marked Answer"]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(v,{value:s.questions.length-Object.values(a.studentExamState.student_answers).filter(n=>n.sub_id==s.sub_id).length}),"Not Visited"]})]})]})},`card_${s.sub_id}`)}function L(){const{examData:s,submitExam:t,isLoaded:a,onTimerExpires:n}=x(),[i]=T(),j=A();return r.useEffect(()=>{(!s.test_name||s.test_name=="")&&j({pathname:"/cat-exam/start",search:i.toString()})},[]),e.jsx("main",{className:"bg-muted",children:e.jsxs("div",{className:"flex min-h-[calc(100vh_-_theme(spacing.16))] flex-1 flex-col gap-4 p-2 md:gap-8 md:p-10 w-full md:w-1/2 m-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-2",children:[e.jsx("h5",{className:"scroll-m-20 text-lg font-medium tracking-tight",children:s.test_name}),e.jsx("div",{className:"flex gap-4",children:s.subjects.length>0&&s.start_date&&a?e.jsx(y,{onExpire:n}):""})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(M,{}),e.jsx(R,{})]}),e.jsxs("div",{className:"flex flex-col md:flex-col justify-between gap-4 bottom-0 w-full p-2",children:[e.jsx(o,{className:"bg-green-600 w-full",size:"lg",onClick:()=>t({submission_source:"manual"}),children:"Submit Exam"}),e.jsx(o,{variant:"outline",className:" w-full",size:"lg",asChild:!0,children:e.jsx(Q,{to:{pathname:"/cat-exam/take",search:i.toString()},children:"Go Back to Questions"})})]})]})})}export{q as SubjectOverviewBlock,R as SubjectWiseOverview,L as SubmitExam,M as TableDemo,D as calcTotalQs,L as default};
